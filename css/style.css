/* =========================
   KontrolSende • style.css
   Glassmorphism • Hızlı • Mobil Uyumlu
   ========================= */

/* --- Reset & Temel Değerler --- */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
:root{
  --bg:#ffffff; --surface:#ffffff; --text:#0e1320; --muted:#5a6170;
  --primary:#00a978; --ring:rgba(0,169,120,.28);
  --radius:14px; --shadow:0 12px 40px rgba(0,0,0,.12); --border:#e9edf3;
}
body{
  background:var(--bg); color:var(--text);
  font-family:Inter,system-ui,Arial,sans-serif; line-height:1.45;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  transition:background .35s,color .25s;
}
h1,h2,h3{font-family:Poppins,Inter,system-ui,Arial,sans-serif;margin:0 0 .5rem}
p{margin:0 0 1rem}
a{color:var(--primary); text-decoration:none}
.ks-container{width:min(1100px,92%); margin:0 auto}
.muted{color:var(--muted)} .small{font-size:.95rem} .tiny{font-size:.85rem}

/* --- Temalar --- */
.theme-green{
  --bg:#f6f9f6; --surface:#ffffff; --text:#101418; --muted:#5b6a5f;
  --primary:#2b8a3e; --ring:rgba(43,138,62,.25); --border:#e6efe6;
  --shadow:0 12px 40px rgba(0,0,0,.12);
}
.theme-dark{
  --bg:#0e141a; --surface:#121a22; --text:#e8ecf2; --muted:#9aa6b2;
  --primary:#00bfa6; --ring:rgba(0,191,166,.25); --border:#1d2833;
  --shadow:0 12px 50px rgba(0,0,0,.45);
}
.theme-glass{
  --bg:#eafff5;
  --surface:rgba(255,255,255,.35);
  --text:#0f1220; --muted:#4f5c67;
  --primary:#00a978; --ring:rgba(0,169,120,.28);
  --border:rgba(255,255,255,.55);
  --shadow:0 18px 60px rgba(0,0,0,.18);
}
body.theme-glass{
  background:
    radial-gradient(1200px 600px at 8% -8%, rgba(0,169,120,.16), transparent 60%),
    radial-gradient(1000px 500px at 92% 0%, rgba(0,191,166,.12), transparent 55%),
    #eafff5;
}

/* =========================
   HEADER / NAV
   ========================= */
.ks-header{
  position:sticky; top:0; z-index:1010;                /* üstte kalsın */
  background:color-mix(in oklab, var(--surface) 75%, transparent);
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(12px) saturate(1.1);
  -webkit-backdrop-filter: blur(12px) saturate(1.1);
}
.ks-nav{display:flex; align-items:center; gap:16px; padding:14px 0}
.ks-logo{font-weight:700; font-size:20px; color:var(--text); text-decoration:none}

/* Backdrop (karartma) */
.ks-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1000;
}
.ks-backdrop.ks-show{ opacity:1; pointer-events:auto }

/* Masaüstü menü */
.ks-drawer{
  margin-left:auto; display:flex; align-items:center; gap:14px; list-style:none; padding:0;
}
.ks-drawer a{ color:var(--text); padding:8px 12px; border-radius:10px }
.ks-drawer a[aria-current="page"]{ color:var(--primary); font-weight:600 }
.ks-theme{ display:flex; align-items:center; gap:6px }
.ks-theme-label{ font-size:.9rem; color:var(--muted) }
.ks-select{
  padding:8px 10px; border:1px solid var(--border); border-radius:10px;
  background:rgba(255,255,255,.75);
}

/* --- Klasik Hamburger (3 çizgi) + X dönüşümü --- */
.ks-hamburger{
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction: column;   /* ← EKLE: çizgiler ÜST ÜSTE */
  gap:6px;                  /* aralar sabit; margin-top gerekmiyor */
  width:48px;height:48px;margin-left:auto;
  background:#fff;border:1px solid #eaecef;border-radius:12px;cursor:pointer;color:#111;
}
.ks-hamburger span{
  display:block;            /* garanti olsun */
  width:24px;height:2px;background:currentColor;border-radius:2px;
  transition:transform .22s ease, opacity .18s ease;
}
.ks-hamburger.ks-active span:nth-child(1){ transform:translateY(6px) rotate(45deg) }
.ks-hamburger.ks-active span:nth-child(2){ opacity:0 }
.ks-hamburger.ks-active span:nth-child(3){ transform:translateY(-6px) rotate(-45deg) }
/* --- Mobil çekmece --- */
@media (max-width:820px){
  .ks-drawer{
    position:fixed; top:0; right:0; height:100dvh; width:min(78vw,360px);
    background:#fff; border-left:1px solid #eaecef;
    padding:calc(var(--ks-offset, 64px) + 12px) 16px 16px;
    overflow:auto; -webkit-overflow-scrolling:touch;
    transform:translateX(100%); transition:transform .25s ease; z-index:1020;
    display:flex; flex-direction:column; gap:10px; list-style:none; margin:0;
  }
  .theme-dark .ks-drawer{
    background:#121a22; border-left-color:#1d2833;
  }
  .ks-drawer.ks-open{ transform:translateX(0) }
  .ks-drawer a{ display:block; padding:12px 10px; border-radius:10px; color:inherit }
  .ks-theme{ width:100%; margin-top:8px }
  .ks-select{ width:100% }
}
@media (min-width:821px){
  .ks-drawer{ position:static; transform:none!important; box-shadow:none; border:0; padding:0 }
}

/* =========================
   HERO & ARKA PLAN IŞIKLARI
   ========================= */
.page-bg{ position:relative }
.page-bg::before{
  content:""; position:absolute; inset:-80px -40px -40px -40px; z-index:-1; filter:blur(26px);
  background:
    radial-gradient(700px 350px at 12% 2%, rgba(163,255,214,.28), transparent 60%),
    radial-gradient(800px 400px at 85% 8%, rgba(201,248,231,.24), transparent 55%);
}
.hero{ display:grid; grid-template-columns:1.2fr .8fr; gap:22px; padding:34px 0 24px }
.hero h1{ font-size:clamp(26px,3.4vw,42px) }
.hero h1 span{ color:var(--primary) }
.hero .actions{ display:flex; gap:10px; flex-wrap:wrap }
.hero-card{ align-self:start }

/* =========================
   KART & BUTONLAR
   ========================= */
.card{
  background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:16px;
  transition:transform .15s ease, box-shadow .25s ease, background .25s ease;
}
.card:hover{ transform:translateY(-1px) }
.btn{
  display:inline-block; border:1px solid var(--border); border-radius:999px;
  padding:10px 16px; background:rgba(255,255,255,.75); color:var(--text)
}
.btn-primary{ background:var(--primary); border-color:transparent; color:#fff }
.btn.ghost{ background:transparent }
.btn:focus{ outline:2px solid var(--ring) }

/* =========================
   GRIDLER
   ========================= */
.grid-3{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; padding:24px 0 }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; padding:24px 0 }
@media (max-width:900px){
  .hero{ grid-template-columns:1fr }
  .grid-3,.grid-2{ grid-template-columns:1fr }
}

/* =========================
   LİSTELER
   ========================= */
.checklist{ margin:10px 0 0 0; padding-left:18px }
.checklist li{ margin:.28rem 0 }

/* =========================
   TEST (QUIZ)
   ========================= */
.quiz-wrap{ padding:28px 0 }
.quiz{ padding:18px }
.progress{
  height:10px; background:#f0f2f5; border-radius:999px;
  margin:4px 0 12px; overflow:hidden; border:1px solid var(--border)
}
#progress-bar{ height:100%; width:0; background:var(--primary); transition:width .2s }
.meta{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px }
.pill{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid var(--border); border-radius:999px }
.pill.soft{ background:#f6f8fb; color:#566 }
.question p{ font-size:1.05rem; margin:.25rem 0 1rem }
.options{ display:grid; gap:10px }
.option{
  border:1px solid var(--border); border-radius:12px; padding:12px;
  background:rgba(255,255,255,.75); cursor:pointer; text-align:left
}
.option.selected{ outline:2px solid var(--ring); border-color:transparent }
.quiz-nav{ display:flex; justify-content:space-between; align-items:center; margin-top:14px }
.quiz-nav .right{ display:flex; gap:8px; align-items:center }
.result h2{ margin-bottom:.25rem }
.bars{ display:grid; gap:12px; margin-top:12px }
.bar{ background:rgba(255,255,255,.75); border:1px solid var(--border); border-radius:12px; padding:12px }
.bar-top{ display:flex; justify-content:space-between; margin-bottom:6px }
.bar-bg{ width:100%; height:12px; background:#f0f2f5; border-radius:999px; overflow:hidden }
.bar-fill{ height:100%; background:var(--primary) }
.bar-fill.mid{ background:#f4b740 } .bar-fill.high{ background:#ff6b6b }
.bar-note{ margin-top:6px; color:#555 }
.history{ margin-top:24px }
.history-list{ display:grid; gap:10px }
.history-item{ background:rgba(255,255,255,.75); border:1px solid var(--border); border-radius:10px; padding:12px }

/* =========================
   ETKİNLİK KARTLARI
   ========================= */
.event-card{
  display:flex; flex-direction:column; gap:10px;
  background:var(--surface); border:1px solid var(--border); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:12px; overflow:hidden;
}
.event-media{
  width:100%; aspect-ratio:16/9; border-radius:12px; overflow:hidden; background:#f2f4f7;
}
.event-media img{
  width:100%; height:100%; object-fit:cover; display:block;
  transform:translateZ(0); will-change:transform;
}
.event-meta{ display:flex; justify-content:space-between; align-items:center; gap:8px }
.event-title{ font-weight:600 }
.event-desc{ color:var(--muted); font-size:.95rem }
.event-actions{ display:flex; gap:8px; flex-wrap:wrap }

/* =========================
   ADMIN
   ========================= */
.admin-wrap{}
.admin-login-row{ display:flex; gap:8px; align-items:center; margin-top:8px }
.admin-login-row input{
  padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:rgba(255,255,255,.75); min-width:180px;
}
.tabs{ display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap }
.event-form{ display:grid; grid-template-columns:1.2fr 1.8fr 1.8fr auto; gap:8px; margin-bottom:12px }
.event-form input{
  padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:rgba(255,255,255,.75);
}
#admin-event-list{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px }
@media (max-width:1000px){ #admin-event-list{ grid-template-columns:1fr 1fr } }
@media (max-width:640px){
  .event-form{ grid-template-columns:1fr; }
  #admin-event-list{ grid-template-columns:1fr }
}

/* =========================
   FOOTER
   ========================= */
.site-footer{ border-top:1px solid var(--border); margin-top:24px }
.foot{ display:flex; align-items:center; justify-content:space-between; padding:16px 0 }
.link{ color:var(--primary) }

/* =========================
   PERFORMANCE & ACCESSIBILITY
   ========================= */
img{ max-width:100%; height:auto }
[hidden]{ display:none !important }
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important }
}

/* Hamburger çizgiler görünmüyor düzeltmesi */
.ks-hamburger { color: var(--text); }          /* çubuk rengi */
.ks-hamburger span { background: currentColor; }
.ks-hamburger.ks-active span { background: currentColor; }
/* === HAMBURGER 0'dan — sade ve stabil === */

/* Z-index sırası (tıklama sorunlarını bitirir) */
.ks-header{ z-index:1010 }
.ks-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45);
  opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1000; }
.ks-backdrop.ks-show{ opacity:1; pointer-events:auto }

/* Buton */
.ks-hamburger{
  display:flex; align-items:center; justify-content:center;
  width:48px; height:48px; margin-left:auto;
  background:#fff; border:1px solid #eaecef; border-radius:12px; cursor:pointer;
  color:#111; /* ÇİZGİ RENGİ BURADAN GELİR */
}
.theme-dark .ks-hamburger{ background:#1a232c; border-color:#2a3744; color:#fff; }
.ks-hamburger span{
  display:block; width:24px; height:2px; background:currentColor;
  border-radius:2px; transition:transform .22s ease, opacity .18s ease;
}
.ks-hamburger span+span{ margin-top:6px }

/* X dönüşümü (merkezde kusursuz) */
.ks-hamburger.ks-active span:nth-child(1){ transform:translateY(6px) rotate(45deg) }
.ks-hamburger.ks-active span:nth-child(2){ opacity:0 }
.ks-hamburger.ks-active span:nth-child(3){ transform:translateY(-6px) rotate(-45deg) }

/* Masaüstü */
.ks-drawer{
  margin-left:auto; display:flex; align-items:center; gap:14px; list-style:none; padding:0;
}
.ks-drawer a{ color:var(--text); padding:8px 12px; border-radius:10px; display:block }

/* Mobil çekmece (sağdan kayan, klasik) */
@media (max-width:820px){
  .ks-drawer{
    position:fixed; top:0; right:0; height:100dvh; width:min(78vw,360px);
    background:#fff; border-left:1px solid #eaecef;
    padding:calc(var(--ks-offset,64px) + 12px) 16px 16px;
    overflow:auto; -webkit-overflow-scrolling:touch;
    transform:translateX(100%); transition:transform .25s ease; z-index:1020;
    display:flex; flex-direction:column; gap:10px; list-style:none; margin:0;
  }
  .theme-dark .ks-drawer{ background:#121a22; border-left-color:#1d2833 }
  .ks-drawer.ks-open{ transform:translateX(0) }
  .ks-drawer a{ padding:12px 10px }
}
@media (min-width:821px){
  .ks-drawer{ position:static; transform:none!important; box-shadow:none; border:0; padding:0 }
}
/* === Z-INDEX SABİTLEME (ikon görünür & tıklanır) === */
.ks-backdrop{ z-index: 1000 !important; }
.ks-drawer  { z-index: 1020 !important; }   /* menü paneli */
.ks-header  { z-index: 1030 !important; }   /* header menünün üstünde */
.ks-hamburger{ position:relative; z-index: 1040 !important; } /* ikon en üstte */
@media (max-width:820px){
  .ks-drawer{
    padding-top: calc(var(--ks-offset, 64px) + 12px) !important;
  }
}
/* === HAMBURGER Sabitleme: Menü üstünde kalsın === */
@media (max-width:820px){
  .ks-hamburger{
    position: fixed !important;
    top: 12px;          /* gerekirse 8–16px arası oynatabilirsin */
    right: 12px;
    z-index: 9999 !important; /* her şeyin üstünde */
    margin-left: 0 !important;
  }
  /* Menü paneli butonun altında başlasın */
  .ks-drawer{
    padding-top: calc(var(--ks-offset, 64px) + 20px) !important;
    z-index: 1020 !important;
  }
  .ks-backdrop{ z-index: 1000 !important; }
  .ks-header{ z-index: 900 !important; }  /* artık buton sabit, header geride kalabilir */
}
.ks-hamburger{
  width:48px !important; height:48px !important;
  overflow: visible; /* taşma yok */
}
/* Menü açıkken hamburger klik yakalamasın */
.menu-open .ks-hamburger{
  z-index: 900 !important;      /* çekmecenin altında kalsın */
  pointer-events: none !important;
}

/* Çekmece menü hamburgerin ÜSTÜNDE olsun */
.ks-drawer{ z-index: 1200 !important; }
.ks-backdrop{ z-index: 1100 !important; }
.ks-header{ z-index: 1000 !important; } /* buton sabitse header geride kalabilir */
/* ==== MENÜ TIKLANMIYOR SORUNU – KESİN ÇÖZÜM ==== */

/* Katman sırası (sade ve net) */
.ks-backdrop{ z-index: 900 !important; }
.ks-header  { z-index: 910 !important; }
.ks-drawer  { z-index: 950 !important; }

/* Menü açıkken: header tıklamayı kapat, hamburgeri tamamen gizle */
body.menu-open #ks-header{ pointer-events: none !important; }
body.menu-open .ks-hamburger{ display: none !important; }

/* Menü paneli her durumda tıklanabilir kalsın */
.ks-drawer{ pointer-events: auto !important; }
.ks-drawer a{ position: relative; z-index: 1; }

/* Mobilde çekmece sabit ve doğru konumda olsun */
@media (max-width:820px){
  .ks-drawer{
    position: fixed !important;
    top: 0; right: 0; height: 100dvh; width: min(78vw, 360px);
    transform: translateX(100%); transition: transform .25s ease;
    background: #fff; border-left:1px solid #eaecef; overflow:auto;
    padding: calc(var(--ks-offset,64px) + 12px) 16px 16px;
  }
  .theme-dark .ks-drawer{ background:#121a22; border-left-color:#1d2833 }
  .ks-drawer.ks-open{ transform: translateX(0) !important; }
}
/* ====== NAV – SON, SAĞLAM HAMBURGER MENÜ ====== */

/* Header */
.ks-header{ position:sticky; top:0; z-index:1000;
  backdrop-filter: blur(12px) saturate(1.08); -webkit-backdrop-filter: blur(12px) saturate(1.08);
  border-bottom:1px solid var(--border);
}
.ks-nav{ display:flex; align-items:center; gap:16px; padding:14px 0 }
.ks-logo{ font-weight:700; font-size:20px; text-decoration:none; color:var(--text) }

/* Masaüstü menü (her zaman görünür) */
.ks-drawer{ margin-left:auto; display:flex; align-items:center; gap:14px; list-style:none; padding:0; margin:0 }
.ks-drawer a{ display:block; padding:8px 12px; border-radius:10px; color:var(--text) }
.ks-drawer a[aria-current="page"]{ color:var(--primary); font-weight:600 }

/* Hamburger (masaüstünde gizli) */
.ks-hamburger{ display:none; }

/* --- Mobil düzen (hamburger + çekmece) --- */
@media (max-width:820px){
  .ks-hamburger{
    display:flex; flex-direction:column; gap:6px; align-items:center; justify-content:center;
    width:48px; height:48px; margin-left:auto; cursor:pointer;
    background:#fff; border:1px solid #eaecef; border-radius:12px; color:#111;
  }
  .theme-dark .ks-hamburger{ background:#1a232c; border-color:#2a3744; color:#fff }
  .ks-hamburger span{
    display:block; width:24px; height:2px; background:currentColor; border-radius:2px;
    transition:transform .22s ease, opacity .18s ease;
  }
  /* X dönüşümü */
  .ks-hamburger.ks-active span:nth-child(1){ transform:translateY(6px) rotate(45deg) }
  .ks-hamburger.ks-active span:nth-child(2){ opacity:0 }
  .ks-hamburger.ks-active span:nth-child(3){ transform:translateY(-6px) rotate(-45deg) }

  /* Menü çekmecesi (sağdan kayan) */
  .ks-drawer{
    position:fixed; top:0; right:0; height:100dvh; width:min(78vw,360px);
    background:#fff; border-left:1px solid #eaecef;
    padding:calc(var(--ks-offset,64px) + 12px) 16px 16px;
    overflow:auto; -webkit-overflow-scrolling:touch;
    transform:translateX(100%); transition:transform .25s ease; z-index:1100;
    flex-direction:column; gap:10px;
  }
  .theme-dark .ks-drawer{ background:#121a22; border-left-color:#1d2833 }
  .ks-drawer.ks-open{ transform:translateX(0) }

  /* Karartma */
  .ks-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1090;
  }
  .ks-backdrop.ks-show{ opacity:1; pointer-events:auto }
}
/* --- Sağdaki beyaz şerit fix --- */
html, body { overflow-x: hidden; }  /* yatay taşmayı kapat */

/* Çekmece tamamen ekran dışına çıksın, kenar görünmesin */
@media (max-width:820px){
  .ks-drawer{
    transform: translate3d(110%,0,0);  /* 100% yerine 110% = garanti */
    right: -1px;                        /* sub-pixel sızıntıyı gizler */
    border-left: none;                  /* kenar çizgisi açıkken verilecek */
  }
  .ks-drawer.ks-open{
    transform: translate3d(0,0,0);
    right: 0;
    border-left: 1px solid #eaecef;     /* sadece açıkken kenar */
  }
}
.quiz-wrap .options{display:grid;gap:10px;margin:12px 0}
.quiz-wrap .option{padding:12px;border-radius:12px;border:1px solid #eaecef;background:#fff;text-align:left}
.quiz-wrap .option.selected{border-color:#00a978;background:#eafff5}
.quiz-nav{display:flex;justify-content:space-between;align-items:center;margin:12px 0}
.progress{height:8px;background:#eef2f4;border-radius:999px;overflow:hidden}
#progress-bar{height:100%;width:0;background:#00a978}
.meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.pill{padding:6px 10px;border-radius:999px;background:#f1f5f9}
.pill.soft{background:#eef7f3}
/* === Drawer kesin stabil (iOS/GitHub Pages) === */
@media (max-width:820px){
  .ks-backdrop{
    position:fixed; top:0; left:0; right:0; bottom:0;
    background:rgba(0,0,0,.45);
    opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1090;
  }
  .ks-backdrop.ks-show{ opacity:1; pointer-events:auto }

  .ks-drawer{
    position:fixed; top:0; right:0; height:100dvh; 
    width:min(82vw,380px);
    /* panel KESİN beyaz ve tam dolu görünsün */
    background:#fff; 
    background-clip:padding-box;
    border-left:1px solid #eaecef;
    padding:calc(var(--ks-offset,64px) + 12px) 16px 16px;
    overflow:auto; -webkit-overflow-scrolling:touch;
    transform:translateX(100%);          /* 110 yerine 100 — sağ kenar sızıntısı kalktı */
    transition:transform .25s ease;
    z-index:1100;
    display:flex; flex-direction:column; gap:10px;
    box-shadow:-18px 0 40px rgba(0,0,0,.22);
  }
  .ks-drawer.ks-open{ transform:translateX(0) }
}
html, body{ overflow-x:hidden } /* yatay taşma kapalı */
